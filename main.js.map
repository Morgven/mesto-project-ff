{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/index.js"],"sourcesContent":["const cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nfunction createCard(\r\n  cardData,\r\n  zoomImage,\r\n  userId,\r\n  handleLikeCard,\r\n  handleDeleteCard\r\n) {\r\n  const cardElement = cardTemplate\r\n    .querySelector(\".places__item.card\")\r\n    .cloneNode(true);\r\n  const cardTitle = cardElement.querySelector(\".card__title\");\r\n  const cardImage = cardElement.querySelector(\".card__image\");\r\n  const buttonLike = cardElement.querySelector(\".card__like-button\");\r\n  const buttonLikeCount = cardElement.querySelector(\".card__like-counter\");\r\n  const buttonDelete = cardElement.querySelector(\".card__delete-button\");\r\n\r\n  cardTitle.textContent = cardData.name;\r\n  cardImage.src = cardData.link;\r\n  cardImage.alt = cardData.name;\r\n  buttonLikeCount.textContent = cardData.likes.length;\r\n\r\n  if (cardData.owner[\"_id\"] === userId) {\r\n    buttonDelete.addEventListener(\"click\", () =>\r\n      handleDeleteCard(cardElement, cardData._id)\r\n    );\r\n  } else {\r\n    buttonDelete.remove();\r\n  }\r\n\r\n  if (cardData.likes.some((like) => like._id === userId)) {\r\n    buttonLike.classList.add(\"card__like-button_is-active\");\r\n  }\r\n\r\n  buttonLike.addEventListener(\"click\", () =>\r\n    handleLikeCard(buttonLike, buttonLikeCount, cardData._id)\r\n  );\r\n\r\n  cardImage.addEventListener(\"click\", () => zoomImage(cardData));\r\n\r\n  return cardElement;\r\n}\r\n\r\nfunction deleteCard(cardElement) {\r\n  cardElement.remove();\r\n}\r\n\r\nfunction likeCard(buttonLike, buttonLikeCount, newCardData) {\r\n  buttonLike.classList.toggle(\"card__like-button_is-active\");\r\n  buttonLikeCount.textContent = newCardData.likes.length;\r\n}\r\n\r\nexport { createCard, deleteCard, likeCard };\r\n","function openModal(modal) {\r\n  modal.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", closeWithEsc);\r\n  modal.addEventListener(\"click\", closeWithOverlay);\r\n}\r\n\r\nfunction closeModal(modal) {\r\n  modal.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", closeWithEsc);\r\n  modal.removeEventListener(\"click\", closeWithOverlay);\r\n}\r\n\r\nfunction closeWithEsc(evt) {\r\n  if (evt.key === \"Escape\") {\r\n    closeModal(document.querySelector(\".popup_is-opened\"));\r\n  }\r\n}\r\n\r\nfunction closeWithOverlay(evt) {\r\n  if (evt.currentTarget === evt.target) {\r\n    closeModal(evt.currentTarget);\r\n  }\r\n}\r\n\r\nexport { openModal, closeModal };\r\n","const validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\nfunction setEventListeners(formElement, config) {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(config.inputSelector)\r\n  );\r\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\r\n  toggleButtonState(inputList, buttonElement, config);\r\n\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", () => {\r\n      checkInputValidity(formElement, inputElement, config.inputErrorClass);\r\n      toggleButtonState(inputList, buttonElement, config);\r\n    });\r\n  });\r\n}\r\n\r\nfunction checkInputValidity(formElement, inputElement, inputErrorClass) {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n  if (inputElement.validity.valid) {\r\n    hideInputError(formElement, inputElement, inputErrorClass);\r\n  } else {\r\n    showInputError(\r\n      formElement,\r\n      inputElement,\r\n      inputErrorClass,\r\n      inputElement.validationMessage\r\n    );\r\n  }\r\n}\r\n\r\nfunction showInputError(\r\n  formElement,\r\n  inputElement,\r\n  inputErrorClass,\r\n  errorMessage\r\n) {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n}\r\n\r\nfunction hideInputError(formElement, inputElement, inputErrorClass) {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(inputErrorClass);\r\n  errorElement.textContent = \"\";\r\n}\r\n\r\nfunction hasInvalidInput(inputList) {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n}\r\n\r\nfunction toggleButtonState(inputList, buttonElement, config) {\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.disabled = true;\r\n    buttonElement.classList.add(config.inactiveButtonClass);\r\n  } else {\r\n    buttonElement.disabled = false;\r\n    buttonElement.classList.remove(config.inactiveButtonClass);\r\n  }\r\n}\r\n\r\nfunction enableValidation(config) {\r\n  const formList = Array.from(document.querySelectorAll(config.formSelector));\r\n  formList.forEach((formElement) => {\r\n    setEventListeners(formElement, config);\r\n  });\r\n}\r\n\r\nfunction clearValidation(formElement, config) {\r\n  const inputList = Array.from(\r\n    formElement.querySelectorAll(config.inputSelector)\r\n  );\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(formElement, inputElement, config.inputErrorClass);\r\n  });\r\n\r\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\r\n  toggleButtonState(inputList, buttonElement, config);\r\n}\r\n\r\nexport { validationConfig, enableValidation, clearValidation };\r\n","const config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-15\",\r\n  headers: {\r\n    authorization: \"5dcf1aa1-8e2e-4665-9dbb-d84d3205566d\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nconst checkResult = (res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n};\r\n\r\nconst getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n  })\r\n    .then((res) => checkResult(res))\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nconst getUserInfo = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers,\r\n  })\r\n    .then((res) => checkResult(res))\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nconst editProfileData = (profileName, profileDescription) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: profileName,\r\n      about: profileDescription,\r\n    }),\r\n  })\r\n    .then((res) => checkResult(res))\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nconst createCardOnServer = (cardName, cardLink) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: cardName,\r\n      link: cardLink,\r\n    }),\r\n  })\r\n    .then((res) => checkResult(res))\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nconst deleteCardOnServer = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  })\r\n    .then((res) => checkResult(res))\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nconst putLike = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: \"PUT\",\r\n    headers: config.headers,\r\n  })\r\n    .then((res) => checkResult(res))\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nconst deleteLike = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  })\r\n    .then((res) => checkResult(res))\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nconst editProfileAvatar = (profileAvatar) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: profileAvatar,\r\n    }),\r\n  })\r\n    .then((res) => checkResult(res))\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport {\r\n  getInitialCards,\r\n  getUserInfo,\r\n  editProfileData,\r\n  createCardOnServer,\r\n  deleteCardOnServer,\r\n  putLike,\r\n  deleteLike,\r\n  editProfileAvatar,\r\n};\r\n","import \"../pages/index.css\";\r\nimport { createCard, deleteCard, likeCard } from \"./card.js\";\r\nimport { openModal, closeModal } from \"./modal.js\";\r\nimport {\r\n  validationConfig,\r\n  enableValidation,\r\n  clearValidation,\r\n} from \"./validation.js\";\r\nimport {\r\n  getInitialCards,\r\n  getUserInfo,\r\n  editProfileData,\r\n  createCardOnServer,\r\n  editProfileAvatar,\r\n  deleteCardOnServer,\r\n  putLike,\r\n  deleteLike,\r\n} from \"./api.js\";\r\n\r\nconst buttonEditProfile = document.querySelector(\".profile__edit-button\");\r\nconst moldalEditProfile = document.querySelector(\".popup_type_edit\");\r\nconst buttonCloseEditProfile = moldalEditProfile.querySelector(\".popup__close\");\r\nconst formEditProfile = moldalEditProfile.querySelector(\".popup__form\");\r\nconst nameEditProfile = formEditProfile.querySelector(\r\n  \".popup__input_type_name\"\r\n);\r\nconst descriptionEditProfile = formEditProfile.querySelector(\r\n  \".popup__input_type_description\"\r\n);\r\nconst profileName = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\n\r\nconst profileImage = document.querySelector(\".profile__image\");\r\nconst modalEditProfileImage = document.querySelector(\".popup_type_edit-avatar\");\r\nconst buttonCloseEditProfileImage =\r\n  modalEditProfileImage.querySelector(\".popup__close\");\r\nconst formEditProfileImage =\r\n  modalEditProfileImage.querySelector(\".popup__form\");\r\nconst avatarInput = formEditProfileImage.querySelector(\r\n  \".popup__input_type_avatar-url\"\r\n);\r\n\r\nconst buttonCreateCard = document.querySelector(\".profile__add-button\");\r\nconst modalCreateCard = document.querySelector(\".popup_type_new-card\");\r\nconst buttonCloseCreateCard = modalCreateCard.querySelector(\".popup__close\");\r\nconst formCreateCard = modalCreateCard.querySelector(\".popup__form\");\r\nconst nameCreateCard = formCreateCard.querySelector(\r\n  \".popup__input_type_card-name\"\r\n);\r\nconst linkCreateCard = formCreateCard.querySelector(\".popup__input_type_url\");\r\n\r\nconst modalZoomImage = document.querySelector(\".popup_type_image\");\r\nconst sourceZoomImage = document.querySelector(\".popup__image\");\r\nconst captionZoomImage = document.querySelector(\".popup__caption\");\r\nconst buttonCloseZoomImage = modalZoomImage.querySelector(\".popup__close\");\r\n\r\nconst buttonSubmit = document.querySelector(\".popup__button\");\r\nconst placesList = document.querySelector(\".places__list\");\r\n\r\nbuttonEditProfile.addEventListener(\"click\", () => {\r\n  openModal(moldalEditProfile);\r\n  nameEditProfile.value = profileName.textContent;\r\n  descriptionEditProfile.value = profileDescription.textContent;\r\n  clearValidation(formEditProfile, validationConfig);\r\n});\r\nformEditProfile.addEventListener(\"submit\", handleEditProfileSubmit);\r\nbuttonCloseEditProfile.addEventListener(\"click\", () =>\r\n  closeModal(moldalEditProfile)\r\n);\r\n\r\nprofileImage.addEventListener(\"click\", () => {\r\n  formEditProfileImage.reset();\r\n  openModal(modalEditProfileImage);\r\n  clearValidation(formEditProfileImage, validationConfig);\r\n});\r\nformEditProfileImage.addEventListener(\"submit\", handleEditProfileImageSubmit);\r\nbuttonCloseEditProfileImage.addEventListener(\"click\", () =>\r\n  closeModal(modalEditProfileImage)\r\n);\r\n\r\nbuttonCreateCard.addEventListener(\"click\", () => {\r\n  formCreateCard.reset();\r\n  openModal(modalCreateCard);\r\n  clearValidation(formCreateCard, validationConfig);\r\n});\r\nformCreateCard.addEventListener(\"submit\", handleAddCardSubmit);\r\nbuttonCloseCreateCard.addEventListener(\"click\", () =>\r\n  closeModal(modalCreateCard)\r\n);\r\n\r\nbuttonCloseZoomImage.addEventListener(\"click\", () =>\r\n  closeModal(modalZoomImage)\r\n);\r\n\r\nfunction handleEditProfileSubmit(evt) {\r\n  evt.preventDefault();\r\n  buttonSubmit.textContent = \"Сохранение...\";\r\n  editProfileData(nameEditProfile.value, descriptionEditProfile.value)\r\n    .then((profileData) => {\r\n      profileName.textContent = profileData.name;\r\n      profileDescription.textContent = profileData.about;\r\n      closeModal(moldalEditProfile);\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => (buttonSubmit.textContent = \"Сохранить\"));\r\n}\r\n\r\nfunction handleEditProfileImageSubmit(evt) {\r\n  evt.preventDefault();\r\n  buttonSubmit.textContent = \"Сохранение...\";\r\n  editProfileAvatar(avatarInput.value)\r\n    .then((newProfileImage) => {\r\n      profileImage.style.backgroundImage = `url('${newProfileImage}')`;\r\n      formEditProfileImage.reset();\r\n      closeModal(modalEditProfileImage);\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => (buttonSubmit.textContent = \"Сохранить\"));\r\n}\r\n\r\nfunction handleAddCardSubmit(evt) {\r\n  evt.preventDefault();\r\n  buttonSubmit.textContent = \"Сохранение...\";\r\n  createCardOnServer(nameCreateCard.value, linkCreateCard.value)\r\n    .then((cardData) => {\r\n      placesList.prepend(\r\n        createCard(\r\n          cardData,\r\n          zoomImage,\r\n          userId,\r\n          handleLikeCard,\r\n          handleDeleteCard\r\n        )\r\n      );\r\n      formCreateCard.reset();\r\n      closeModal(modalCreateCard);\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => (buttonSubmit.textContent = \"Сохранить\"));\r\n}\r\n\r\nfunction handleLikeCard(buttonLike, buttonLikeCount, cardId) {\r\n  if (buttonLike.classList.contains(\"card__like-button_is-active\")) {\r\n    deleteLike(cardId)\r\n      .then((newCardData) => {\r\n        likeCard(buttonLike, buttonLikeCount, newCardData);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  } else {\r\n    putLike(cardId)\r\n      .then((newCardData) => {\r\n        likeCard(buttonLike, buttonLikeCount, newCardData);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n}\r\n\r\nfunction handleDeleteCard(cardElement, cardId) {\r\n  deleteCardOnServer(cardId)\r\n    .then(() => {\r\n      deleteCard(cardElement);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n}\r\n\r\nfunction zoomImage(image) {\r\n  captionZoomImage.textContent = image.name;\r\n  sourceZoomImage.src = image.link;\r\n  sourceZoomImage.alt = image.name;\r\n  openModal(modalZoomImage);\r\n}\r\n\r\n// Код для первой версии проекта, без подключения к серверу\r\n// function displayLocalCards(cardsArray) {\r\n//   cardsArray.forEach(function (cardData) {\r\n//     const cardElement = createCard(cardData, deleteCard, likeCard, zoomImage);\r\n//     placesList.appendChild(cardElement);\r\n//   });\r\n// }\r\n\r\n// displayLocalCards(initialCards);\r\n\r\nenableValidation(validationConfig);\r\n\r\nlet userId;\r\nPromise.all([getUserInfo(), getInitialCards()])\r\n  .then(function displayServerCardsAndUserInfo([userInfo, cardsArray]) {\r\n    userId = userInfo._id;\r\n    profileName.textContent = userInfo.name;\r\n    profileDescription.textContent = userInfo.about;\r\n    profileImage.style.backgroundImage = `url('${userInfo.avatar}')`;\r\n    cardsArray.forEach(function (cardData) {\r\n      placesList.append(\r\n        createCard(\r\n          cardData,\r\n          zoomImage,\r\n          userId,\r\n          handleLikeCard,\r\n          handleDeleteCard\r\n        )\r\n      );\r\n    });\r\n  })\r\n  .catch((err) => console.log(err));\r\n"],"names":["cardTemplate","document","querySelector","content","createCard","cardData","zoomImage","userId","handleLikeCard","handleDeleteCard","cardElement","cloneNode","cardTitle","cardImage","buttonLike","buttonLikeCount","buttonDelete","textContent","name","src","link","alt","likes","length","owner","addEventListener","_id","remove","some","like","classList","add","likeCard","newCardData","toggle","openModal","modal","closeWithEsc","closeWithOverlay","closeModal","removeEventListener","evt","key","currentTarget","target","validationConfig","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","hideInputError","formElement","inputElement","errorElement","concat","id","toggleButtonState","inputList","buttonElement","config","validity","valid","hasInvalidInput","disabled","clearValidation","Array","from","querySelectorAll","forEach","baseUrl","headers","authorization","checkResult","res","ok","json","Promise","reject","status","buttonEditProfile","moldalEditProfile","buttonCloseEditProfile","formEditProfile","nameEditProfile","descriptionEditProfile","profileName","profileDescription","profileImage","modalEditProfileImage","buttonCloseEditProfileImage","formEditProfileImage","avatarInput","buttonCreateCard","modalCreateCard","buttonCloseCreateCard","formCreateCard","nameCreateCard","linkCreateCard","modalZoomImage","sourceZoomImage","captionZoomImage","buttonCloseZoomImage","buttonSubmit","placesList","cardId","contains","fetch","method","then","catch","err","console","log","deleteLike","putLike","deleteCardOnServer","deleteCard","image","value","preventDefault","body","JSON","stringify","about","editProfileData","profileData","finally","reset","profileAvatar","avatar","newProfileImage","style","backgroundImage","cardName","cardLink","prepend","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","enableValidation","all","_ref","_ref2","userInfo","cardsArray","append"],"sourceRoot":""}